version: '3.8'

services:
  # ==========================================
  # 1. SurrealDB Database
  # Accessed via https://db.gemmavue.xyz
  # ==========================================
# Database disabled in Compose - Deploying as Dokploy Application for better reliability
#  surrealdb:
#    image: surrealdb/surrealdb:latest
# ... (removed)

  # ==========================================
  # 2. Surrealist UI (Admin Panel)
  # Accessed via https://admin.gemmavue.xyz
  # ==========================================
  surrealist:
    image: surrealdb/surrealist:latest
    container_name: gemmavue-surrealist
    restart: unless-stopped
    networks:
      - dokploy-network
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.gemmavue-admin.rule=Host(`admin.gemmavue.xyz`)"
      - "traefik.http.routers.gemmavue-admin.entrypoints=websecure"
      - "traefik.http.routers.gemmavue-admin.tls.certresolver=letsencrypt"
      # Using Auto-Port detection for Surrealist as it worked previously

volumes:
  surreal-data:

networks:
  dokploy-network:
    external: true
